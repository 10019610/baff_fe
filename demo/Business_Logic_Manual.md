# 비즈니스 로직 매뉴얼

이 문서는 Figma AI를 통해 생성된 데모 프로젝트의 핵심 비즈니스 로직을 설명합니다.

## 1. 인증 및 사용자 관리

*   **인증 시스템:** `AuthContext.tsx`를 통해 애플리케이션 전반에 걸쳐 사용자 인증 상태를 관리합니다.
*   **모의 소셜 로그인:** Google 및 Kakao를 통한 소셜 로그인 기능을 제공하지만, 현재는 클라이언트 측에서 `localStorage`를 사용하여 로그인 상태를 시뮬레이션하는 **모의 구현**입니다. 실제 백엔드 연동은 되어 있지 않습니다.
*   **사용자 데이터:** `id`, `email`, `name`, `profileImage`, `provider`, `createdAt`을 포함하는 `User` 인터페이스로 사용자 정보를 정의합니다.
*   **세션 유지:** 페이지 로드 시 `localStorage`에서 사용자 정보를 확인하여 로그인 상태를 유지합니다.
*   **로그인/로그아웃:** `login` 함수는 모의 로그인 과정을 시뮬레이션하고, `logout` 함수는 `localStorage`에서 사용자 정보를 제거하여 로그아웃 처리합니다.
*   **데이터 마이그레이션 (모의):** 모의 로그인 시 기존 `localStorage` 데이터를 사용자별 키로 연결하는 로직이 포함되어 있습니다. 이는 실제 환경에서 서버가 사용자별 데이터를 관리하는 것을 시뮬레이션하기 위한 것입니다.

## 2. 체중 기록 기능

*   **핵심 컴포넌트:** `WeightTracker.tsx` (`pages/TrackerPage.tsx`에서 렌더링).
*   **체중 기록:** 사용자가 특정 날짜의 체중을 입력하고 기록할 수 있습니다.
*   **데이터 관리:**
    *   `WeightEntry` 인터페이스로 체중 기록(`id`, `date`, `weight`, `change`)을 정의합니다.
    *   모든 체중 기록은 `localStorage`에 `weightEntries`라는 키로 저장되고 관리됩니다.
*   **체중 변화 추적:**
    *   새로운 기록이 추가되거나 기존 기록이 업데이트될 때마다 이전 기록과의 체중 변화량(`change`)을 자동으로 계산합니다.
    *   모든 기록의 변화량을 재계산하여 일관성을 유지합니다.
*   **통계 및 시각화:**
    *   현재 체중, 총 변화량, 기록된 일수 등 주요 통계를 제공합니다.
    *   `recharts` 라이브러리를 사용하여 시간에 따른 체중 변화를 선 그래프로 시각화합니다.
    *   체중 변화량에 따라 아이콘과 색상 배지를 통해 시각적으로 피드백을 제공합니다.

## 3. 목표 설정 기능

*   **핵심 컴포넌트:** `GoalSetting.tsx` (`pages/GoalsPage.tsx`에서 렌더링).
*   **목표 생성:** 사용자가 주별 또는 월별 목표 체중을 설정할 수 있습니다.
    *   목표 설정 시 현재 체중 기록이 필수적입니다.
    *   목표 유형에 따라 시작일과 종료일이 자동으로 계산됩니다.
*   **데이터 관리:**
    *   `Goal` 인터페이스로 목표(`id`, `type`, `targetWeight`, `startWeight`, `startDate`, `endDate`, `status`, `title`)를 정의합니다.
    *   모든 목표는 `localStorage`에 `weightGoals`라는 키로 저장되고 관리됩니다.
*   **목표 진행률:**
    *   현재 체중을 기반으로 목표 달성 진행률을 백분율로 계산하여 표시합니다.
    *   남은 일수를 계산하여 목표 달성까지의 기간을 알려줍니다.
*   **목표 상태:**
    *   목표의 종료일과 현재 체중을 기준으로 목표 상태(`active`, `completed`, `failed`)를 자동으로 업데이트합니다.
    *   완료된 목표는 목표 체중과의 오차 범위(0.5kg) 내에 있는지로 판단합니다.
*   **시각적 피드백:** 목표 상태에 따라 다른 색상과 아이콘의 배지를 표시합니다.

## 4. 대결 모드 기능

*   **핵심 컴포넌트:** `BattleMode.tsx` (`pages/BattlePage.tsx`에서 렌더링).
*   **방 관리:**
    *   `Room` 인터페이스로 대결 방(`id`, `name`, `description`, `password`, `createdBy`, `participants`, `maxParticipants`, `createdAt`, `isActive`, `settings`)을 정의합니다.
    *   `localStorage`에 `battleRooms_userId` 형태로 저장되어 사용자별 방 목록을 관리합니다.
*   **주요 기능:**
    *   **새 방 만들기:** `RoomCreation.tsx`를 통해 새로운 대결 방을 생성합니다.
    *   **방 참가하기:** `RoomJoin.tsx`를 통해 기존 방에 참여합니다. 초대 링크(URL 파라미터)를 통한 자동 참여 기능도 지원합니다.
    *   **방 목록:** `RoomList.tsx`를 통해 현재 참여 가능한 방 목록을 표시합니다.
    *   **방 초대:** `RoomInvite.tsx`를 통해 생성된 방으로 다른 사용자를 초대할 수 있습니다.
    *   **활성 대결:** `ActiveBattles.tsx`를 통해 현재 진행 중인 대결을 표시합니다.
    *   **대결 기록:** `BattleHistory.tsx`를 통해 과거 대결 결과를 표시합니다.
*   **클라이언트 측 시뮬레이션:** 모든 방 및 대결 데이터는 `localStorage`를 통해 클라이언트 측에서 관리됩니다. 이는 실제 서버 기반의 실시간 대결 시스템이 아닌 데모 시연을 위한 것입니다.
*   **알림:** 대기 중인 방의 수를 배지로 표시하여 사용자에게 알림을 제공합니다.

## 5. 대시보드 기능

*   **핵심 컴포넌트:** `Dashboard.tsx` (`pages/DashboardPage.tsx`에서 렌더링).
*   **데이터 집계:** `localStorage`에 저장된 체중 기록(`weightEntries`)과 목표(`weightGoals`) 데이터를 집계하여 사용자에게 종합적인 정보를 제공합니다.
*   **주요 통계:**
    *   현재 체중, 총 체중 변화량, 주간 평균 체중 변화량, 총 기록 일수 등 핵심 지표를 한눈에 볼 수 있도록 제공합니다.
*   **시각화:**
    *   **주차별 체중 변화:** `recharts`를 사용하여 주간 체중 변화를 막대 그래프로 시각화합니다. 체중 감소는 녹색, 증가는 빨간색으로 표시됩니다.
    *   **목표 달성 현황:** 원형 차트를 통해 완료, 진행 중, 실패한 목표의 비율을 시각적으로 보여줍니다.
*   **최근 성과:** 최근 완료된 목표 목록을 표시합니다.
*   **진행 중인 목표:** 현재 진행 중인 목표의 진행률과 남은 일수를 표시합니다.
*   **조건부 표시:** 데이터가 부족할 경우 사용자에게 체중 기록 및 목표 설정을 유도하는 메시지를 표시합니다.

## 6. 데이터 영속성 (공통)

이 데모 프로젝트의 모든 사용자 데이터(인증 정보, 체중 기록, 목표, 대결 방 정보)는 웹 브라우저의 `localStorage`에 저장됩니다. 이는 데모 환경에서 백엔드 없이 기능을 시연하기 위한 목적으로, 실제 서비스에서는 서버 측 데이터베이스를 통해 데이터를 관리해야 합니다.
